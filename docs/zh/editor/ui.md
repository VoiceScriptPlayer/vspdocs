# UI æ ‡ç­¾é¡µ

UI æ ‡ç­¾é¡µæ˜¯ç”¨äº**æ„å»ºå’Œæ§åˆ¶é¡¹ç›®ç•Œé¢ï¼ˆUser Interfaceï¼‰**çš„ç¼–è¾‘å™¨ã€‚  
ä½ å¯ä»¥åœ¨è¿™é‡Œæ”¾ç½®æŒ‰é’®ã€å›¾åƒã€æ–‡æœ¬ç­‰å„ç§ UI æ§ä»¶ï¼Œ  
å¹¶é€šè¿‡è„šæœ¬å°†å®ƒä»¬è¿æ¥èµ·æ¥ï¼Œå®ç°**äº¤äº’åŠŸèƒ½**ã€‚

---

## 1. åŸºæœ¬ç•Œé¢

![ui-main](../images/ui-main.png)

| ç»„ä»¶ | è¯´æ˜ |
|------|------|
| **â‘  æ‹–åŠ¨ä»¥æ·»åŠ ç©º UI** | åˆ›å»ºæ–°çš„ **UI å®ä¾‹**ã€‚ |
| **â‘¡ UI æ¨¡æ¿** | ç®¡ç†å¯é‡å¤ä½¿ç”¨çš„ **UI å¸ƒå±€æ¨¡æ¿**ã€‚ |
| **â‘¢ å¯¼å…¥** | è½½å…¥å·²ä¿å­˜çš„ UI æ¨¡æ¿ã€‚ |
| **â‘£ æ–°å»º** | åˆ›å»ºæ–°çš„ UI æ¨¡æ¿ã€‚ |
| **â‘¤ ç¼–è¾‘ âœï¸** | æ‰“å¼€é€‰å®š UI çš„ç¼–è¾‘å™¨ã€‚ |
| **â‘¥ åˆ é™¤ ğŸ—‘ï¸** | ä»åˆ—è¡¨ä¸­ç§»é™¤é€‰å®šçš„ UIã€‚ |
| **â‘¦ æ‰“å¼€æ–‡ä»¶å¤¹ ğŸ“‚** | ç›´æ¥æ‰“å¼€ `Asset/UI/` æ–‡ä»¶å¤¹ã€‚ |

> ğŸ’¡ **æç¤ºï¼š**  
> UI å®ä¾‹æ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œ  
> è€Œ UI æ¨¡æ¿çš„ä¿®æ”¹ä¼šåŒæ­¥å½±å“æ‰€æœ‰å¼•ç”¨è¯¥æ¨¡æ¿çš„å®ä¾‹ã€‚

---

## 2. UI æ¨¡æ¿ä¸å®ä¾‹

UI åˆ†ä¸º **æ¨¡æ¿å‹ï¼ˆTemplateï¼‰** ä¸ **å®ä¾‹å‹ï¼ˆInstanceï¼‰** ä¸¤ç§ç±»å‹ï¼Œ  
å®ƒä»¬åœ¨åº”ç”¨èŒƒå›´ä¸ä¿®æ”¹æ–¹å¼ä¸Šæœ‰æ‰€ä¸åŒã€‚

| ç±»å‹ | è¯´æ˜ | ç‰¹ç‚¹ |
|------|------|------|
| **UI æ¨¡æ¿** | å¯é‡å¤ä½¿ç”¨çš„å…±äº« UI å¸ƒå±€ã€‚ | å¯åœ¨å¤šä¸ªåœºæ™¯ä¸­é€šç”¨ï¼Œä¿®æ”¹æ¨¡æ¿åä¼šç»Ÿä¸€æ›´æ–°ã€‚ |
| **UI å®ä¾‹** | ä»…åœ¨å•ä¸ªåœºæ™¯ä¸­ç‹¬ç«‹ä½¿ç”¨çš„ UIã€‚ | å„å®ä¾‹ç›¸äº’ç‹¬ç«‹ï¼Œä¸å—æ¨¡æ¿ä¿®æ”¹å½±å“ã€‚ |

> ğŸ’¡ **ç¤ºä¾‹ï¼š**  
> â€œé€‰é¡¹èœå•â€ã€â€œæš‚åœç•Œé¢â€ã€â€œå¼€å§‹ç”»é¢â€ç­‰é€‚åˆä¿å­˜ä¸ºæ¨¡æ¿ï¼›  
> ç‰¹å®šäº‹ä»¶çš„å¼¹çª—æˆ–ä¸€æ¬¡æ€§ç•Œé¢é€‚åˆä½œä¸ºå®ä¾‹æ·»åŠ ã€‚

---

## 3. UI ç¼–è¾‘å™¨

![ui-editor](../images/ui-editor.png)

UI ç¼–è¾‘å™¨ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š  
å·¦ä¾§ä¸ºæ§ä»¶åˆ—è¡¨ï¼Œä¸­é—´æ˜¯ç¼–è¾‘ç”»å¸ƒï¼Œå³ä¾§æ˜¯å±æ€§é¢æ¿ã€‚  
ä»æ§ä»¶åˆ—è¡¨ä¸­é€‰æ‹©å…ƒç´ æ‹–å…¥ç”»å¸ƒï¼Œç„¶ååœ¨å³ä¾§è°ƒæ•´è¯¦ç»†å±æ€§ã€‚

---

### ğŸ›ï¸ é¡¶éƒ¨é€‰é¡¹

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| **Nameï¼ˆåç§°ï¼‰** | æŒ‡å®š UI çš„åç§°ã€‚ |
| **åœ¨æš‚åœçŠ¶æ€ä¸‹è¿è¡Œ** | å³ä½¿é¡¹ç›®æš‚åœï¼Œè¯¥ UI ä»ä¼šæ˜¾ç¤ºå¹¶å“åº”æ“ä½œã€‚ |
| **æ˜¾ç¤ºåœ¨å­—å¹•ä¸‹æ–¹** | å°† UI å±‚çº§æ”¾åœ¨å­—å¹•åé¢ï¼ˆç”¨äº HUD æˆ–èƒŒæ™¯ UIï¼‰ã€‚ |

---

## 4. æ§ä»¶åˆ—è¡¨

| æ§ä»¶ | è¯´æ˜ |
|------|------|
| **Panel** | å¯åŒ…å«å…¶ä»–æ§ä»¶çš„åŸºç¡€å®¹å™¨ã€‚ |
| **Button** | å¤„ç†ç‚¹å‡»äº‹ä»¶ã€‚ |
| **ComboBox** | ä»ä¸‹æ‹‰é€‰é¡¹ä¸­é€‰æ‹©ä¸€é¡¹ã€‚ |
| **Input** | æ–‡æœ¬è¾“å…¥å­—æ®µã€‚ |
| **Label / OutlineLabel** | æ˜¾ç¤ºæ–‡å­—ï¼ŒOutlineLabel å…·æœ‰å¤–è½®å»“æ•ˆæœã€‚ |
| **Slider / ProgressBar** | è°ƒèŠ‚æ•°å€¼èŒƒå›´æˆ–æ˜¾ç¤ºè¿›åº¦ã€‚ |
| **Image** | æ˜¾ç¤ºå›¾åƒæ–‡ä»¶ã€‚ |
| **CheckBox** | æ‹¥æœ‰å¼€ / å…³çŠ¶æ€çš„æ§ä»¶ã€‚ |

> âš™ï¸ **æ³¨æ„ï¼š**  
> åªæœ‰ `Panel` æ§ä»¶å¯ä»¥åŒ…å«å­æ§ä»¶ï¼›  
> å…¶ä»–æ§ä»¶éƒ½æ˜¯ç‹¬ç«‹å…ƒç´ ã€‚

---

## 5. å±æ€§ç¼–è¾‘

![ui-properties](../images/ui-properties.png)

UI æ§ä»¶çš„å±æ€§å› ç±»å‹è€Œå¼‚ï¼Œä½†å¤§å¤šæ•°å…±äº«ä»¥ä¸‹ **é€šç”¨å±æ€§**ï¼š

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| **Name** | æ§ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼Œå¯åœ¨è„šæœ¬ä¸­å¼•ç”¨ã€‚ |
| **Width / Height** | æ§ä»¶å°ºå¯¸ã€‚ |
| **Horizontal / Vertical Alignment** | ç›¸å¯¹äºçˆ¶å®¹å™¨çš„å¯¹é½æ–¹å¼ã€‚ |
| **Margin** | ä¸çˆ¶å®¹å™¨çš„è¾¹è·ã€‚ |
| **Foreground / Background Color** | å‰æ™¯è‰²ä¸èƒŒæ™¯è‰²ã€‚ |
| **Opacity / Rotation / Scale** | é€æ˜åº¦ã€æ—‹è½¬è§’åº¦ã€ç¼©æ”¾æ¯”ä¾‹ã€‚ |
| **IsEnabled / IsVisible** | æ§åˆ¶å¯ç”¨ä¸å¯è§çŠ¶æ€ã€‚ |

> ğŸ’¡ **æç¤ºï¼š**  
> æŸäº›æ§ä»¶è¿˜æœ‰é¢å¤–å±æ€§ï¼Œä¾‹å¦‚ï¼š  
> `Text`ã€`FontSize`ã€`ImageSource`ã€`MaxValue` ç­‰ã€‚

---

## 6. è„šæœ¬äº‹ä»¶

![ui-script](../images/ui-script.png)

UI æ§ä»¶å¯ä»¥æ ¹æ®æ“ä½œ**è§¦å‘äº‹ä»¶**ï¼Œ  
å¹¶å¯åœ¨å³ä¾§çš„ `Script` é€‰é¡¹å¡ä¸­è¿æ¥å¯¹åº”çš„è„šæœ¬ã€‚

---

### ğŸ§© é€šç”¨äº‹ä»¶ï¼ˆé€‚ç”¨äºæ‰€æœ‰æ§ä»¶ï¼‰

| äº‹ä»¶ | è¯´æ˜ |
|------|------|
| **MouseDown / MouseUp** | é¼ æ ‡æŒ‰ä¸‹æˆ–é‡Šæ”¾æ—¶è§¦å‘ã€‚ |
| **MouseEnter / MouseLeave** | é¼ æ ‡è¿›å…¥æˆ–ç¦»å¼€æ§ä»¶åŒºåŸŸæ—¶è§¦å‘ã€‚ |

> ğŸ’¡ **ç‰¹æ®Šäº‹ä»¶ï¼š**  
> ä¸» `Panel` å…·æœ‰ **Tick** äº‹ä»¶ï¼Œ  
> å½“ UI æ‰“å¼€æ—¶ï¼Œè¯¥äº‹ä»¶ä¼šåœ¨æ¯ä¸€å¸§è°ƒç”¨ï¼Œ  
> å¯ç”¨äºå®æ—¶æ›´æ–°æˆ–åŠ¨ç”»æ§åˆ¶ã€‚

---

### ğŸ›ï¸ æ§ä»¶ç‰¹æœ‰äº‹ä»¶

| æ§ä»¶ | äº‹ä»¶ | è¯´æ˜ |
|------|------|------|
| **Panel** | `Loaded` | å½“é¢æ¿è¢«æ˜¾ç¤ºæ—¶è§¦å‘ã€‚ |
| **Panel** | `Unloaded` | å½“é¢æ¿è¢«å…³é—­æ—¶è§¦å‘ã€‚ |
| **Button** | `Click` | ç‚¹å‡»æ—¶æ‰§è¡Œã€‚ |
| **Input** | `TextChanged` | æ–‡æœ¬è¾“å…¥å‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œã€‚ |
| **Slider / ComboBox / CheckBox** | `ValueChanged` | å½“å€¼å‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œã€‚ |

> ğŸ’¡ **æç¤ºï¼š**  
> æ¯ä¸ªäº‹ä»¶éƒ½å¯ä»¥ç»‘å®šç‹¬ç«‹è„šæœ¬ï¼Œ  
> ç»‘å®šçš„è„šæœ¬ä¼šåœ¨è¿è¡Œæ—¶è‡ªåŠ¨è§¦å‘ã€‚

---

### ğŸ’¡ UI è„šæœ¬æ§åˆ¶

UI æ§ä»¶å¯ä»¥é€šè¿‡è„šæœ¬ç›´æ¥è®¿é—®ä¸æ“ä½œã€‚  
åœ¨è„šæœ¬ä¸­ä¼šè‡ªåŠ¨æä¾›ä¸€ä¸ªå†…ç½®å˜é‡ **`CurrentUI`**ï¼Œ  
å¯ç”¨äºè®¿é—®å½“å‰æ‰“å¼€çš„ UI åŠå…¶å†…éƒ¨æ§ä»¶ã€‚

![ui-variable-control](../images/ui-variable-control.png)

> ğŸ’¡ **ç¤ºä¾‹ï¼š**  
> åœ¨æŒ‰é’®ç‚¹å‡»æ—¶ä¿®æ”¹  
> `CurrentUI | NewButton | FontSize` çš„å€¼ï¼Œ  
> å³å¯å®æ—¶è°ƒæ•´æŒ‰é’®æ–‡å­—å¤§å°ã€‚  
> é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å®ç° **åŠ¨æ€æ–‡å­—ã€é¢œè‰²å˜åŒ–ã€çŠ¶æ€æ›´æ–°** ç­‰æ•ˆæœã€‚

è¿˜å¯ä»¥é€šè¿‡è„šæœ¬ç›´æ¥**æ‰“å¼€æˆ–å…³é—­ UI æ¨¡æ¿**ï¼š

![ui-open-example](../images/ui-open-example.png)

> ğŸ’¡ **ç¤ºä¾‹ï¼š**  
> ä½¿ç”¨è„šæœ¬æŒ‡ä»¤ï¼š  
> `æ‰“å¼€ UI "New UI"ï¼Œæ ‡è¯†ç¬¦ä¸º "TEST"`  
> å³å¯åŠ¨æ€æ˜¾ç¤ºæŒ‡å®šçš„ UI æ¨¡æ¿ã€‚  
> åˆ©ç”¨æ­¤åŠŸèƒ½ï¼Œå¯ä»¥æ ¹æ®äº‹ä»¶æˆ–è§¦å‘å™¨  
> è‡ªåŠ¨åˆ‡æ¢ç•Œé¢æˆ–å¼¹å‡ºå¯¹è¯æ¡†ã€‚

---

## 7. æ§ä»¶ç®¡ç†

![ui-context-menu](../images/ui-context-menu.png)

å³é”®ç‚¹å‡»æ§ä»¶å¯æ˜¾ç¤ºç®¡ç†èœå•ï¼š

| èœå• | è¯´æ˜ |
|------|------|
| **å‰ªåˆ‡ / å¤åˆ¶ / ç²˜è´´** | ç§»åŠ¨æˆ–å¤åˆ¶æ§ä»¶ã€‚ |
| **ç½®äºæœ€å‰ / ç½®äºæœ€å** | è°ƒæ•´æ§ä»¶çš„æ˜¾ç¤ºå±‚çº§ã€‚ |
| **åˆ é™¤ (Delete)** | åˆ é™¤é€‰ä¸­çš„æ§ä»¶ã€‚ |

å³ä¸Šè§’çš„ä¸‹æ‹‰æ¡†å¯å¿«é€Ÿé€‰æ‹©ç”»å¸ƒä¸­éš¾ä»¥ç‚¹å‡»çš„æ§ä»¶ã€‚

---

## 8. Panel ä¸å¸ƒå±€ç³»ç»Ÿ

`Panel` æ˜¯ UI çš„æ ¹å®¹å™¨ï¼Œ  
æ‰€æœ‰å­æ§ä»¶çš„ **å¸ƒå±€åŸºå‡†** éƒ½ä»¥å®ƒä¸ºä¸­å¿ƒã€‚

---

### ğŸ§± WPF å¸ƒå±€ç»“æ„

UI å¸ƒå±€åŸºäº **WPFï¼ˆWindows Presentation Foundationï¼‰** ç³»ç»Ÿï¼Œ  
é‡‡ç”¨ **ç›¸å¯¹å®šä½ä¸è¾¹è· (Margin)** è€Œéç»å¯¹åæ ‡ï¼Œ  
å¯åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹ä¿æŒä¸€è‡´çš„ä½ç½®ä¸æ¯”ä¾‹ã€‚

| æ¦‚å¿µ | è¯´æ˜ |
|------|------|
| **Alignment** | ç›¸å¯¹äºçˆ¶å®¹å™¨çš„å·¦/å³/ä¸­å¯¹é½ã€‚ |
| **Margin** | æ§ä»¶ä¸çˆ¶å®¹å™¨ä¹‹é—´çš„é—´è·ã€‚ |
| **Z-Order** | æ§ä»¶çš„æ˜¾ç¤ºä¼˜å…ˆçº§ã€‚ |
| **Relative Layout** | æ ¹æ®åˆ†è¾¨ç‡æ¯”ä¾‹è‡ªåŠ¨è°ƒæ•´çš„ç›¸å¯¹å¸ƒå±€ç³»ç»Ÿã€‚ |

> ğŸ’¡ **å‚è€ƒèµ„æ–™ï¼š**  
> - [Microsoft Docsï¼šWPF å¸ƒå±€æ¦‚è¿°](https://learn.microsoft.com/zh-cn/dotnet/desktop/wpf/advanced/layout?view=netframeworkdesktop-4.8)  
> - [WPF é¢æ¿ä»‹ç»ï¼ˆGridã€StackPanelã€Canvas ç­‰ï¼‰](https://learn.microsoft.com/zh-cn/dotnet/desktop/wpf/controls/panels-overview?view=netframeworkdesktop-4.8)

> âš™ï¸ **æç¤ºï¼š**  
> åˆå­¦æ—¶å¯å°† `HorizontalAlignment` ä¸ `VerticalAlignment`  
> è®¾ä¸ºâ€œå·¦/ä¸Šâ€ï¼Œå†ç”¨ `Margin` è°ƒæ•´ä½ç½®ï¼Œä¼šæ›´ç›´è§‚æ˜“æ‡‚ã€‚

---

## 9. æ–‡ä»¶ç»“æ„

| é¡¹ç›® | è·¯å¾„ |
|------|------|
| **UI æ¨¡æ¿æ•°æ®** | `Asset/UI/` |
| **èµ„æºï¼ˆå›¾ç‰‡ç­‰ï¼‰** | `Asset/Image/` |

---

## 10. ç›¸å…³æ–‡æ¡£

- [Live2D æ ‡ç­¾é¡µ](live2d.md)  
- [è„šæœ¬æ ‡ç­¾é¡µ](script.md)  
- [æ—¶é—´è½´ç¼–è¾‘](timeline.md)  
